<!-- http://railscasts.com/episodes/223-charts?autoplay=true -->

<h1> Temperatur und Luftdruckmessung</h1>

<div id="container" style="width:100%; height:400px;"></div>

<script>
$(function () {
    $('#container').highcharts({
        chart: {
            type: 'spline'
        },

        title: { text: 'Temperatur und Luftdruck', x: -20 //center
        },
        subtitle: {
            text: 'http://railscasts.com/episodes/223-charts?view=asciicast',
            x: -20
        },
        xAxis: { type: 'datetime' },
        yAxis: {
            title: {
                text: 'Temperatur (°C)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            valueSuffix: '°C'
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            borderWidth: 0
        },
        series: [{
            name: 'Innentemperatur',
            pointInterval: <%= 1.day * 1000 %>,
            pointStart: <%= 3.weeks.ago.at_midnight.to_i * 1000 %>,
            data: <%= SensorsController.get_temperature() %>
        }, {
            name: 'Luftdruck',
            pointInterval: <%= 1.day * 1000 %>,
            pointStart: <%= 3.weeks.ago.at_midnight.to_i * 1000 %>,
            data: <%= SensorsController.get_pressure() %>
        }
     ]
    });

});</script>

<!-- http://stackoverflow.com/questions/13148888/how-to-get-the-current-time-as-13-digit-integer-in-ruby -->
<!-- http://www.jacoulter.com/2012/01/02/rails-highcharts-with-irregular-time-intervals/ -->
